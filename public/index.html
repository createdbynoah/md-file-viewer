<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Viewer</title>

  <!-- highlight.js themes (light + dark) -->
  <link id="hljs-theme" rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/github.min.css">

  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <!-- ── Login Screen ──────────────────────────────────────────────────── -->
  <div id="login-screen" class="screen" hidden>
    <div class="login-card">
      <div class="login-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
          <polyline points="13 2 13 9 20 9"/>
        </svg>
      </div>
      <h1>Markdown Viewer</h1>
      <p class="login-subtitle">Enter password to continue</p>
      <form id="login-form">
        <input type="password" id="login-password" placeholder="Password" autocomplete="current-password" required>
        <button type="submit">Sign In</button>
      </form>
      <p id="login-error" class="error" hidden>Invalid password</p>
    </div>
  </div>

  <!-- ── Main App ──────────────────────────────────────────────────────── -->
  <div id="app-screen" class="screen" hidden>

    <!-- Top bar -->
    <header class="topbar">
      <div class="topbar-left">
        <button id="sidebar-toggle" class="icon-btn" aria-label="Toggle sidebar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
        <h1 class="topbar-title" id="viewer-title">Markdown Viewer</h1>
      </div>
      <div class="topbar-right">
        <button id="theme-toggle" class="icon-btn" aria-label="Toggle theme">
          <svg id="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg id="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" hidden>
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <button id="logout-btn" class="icon-btn" aria-label="Logout">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
        </button>
      </div>
    </header>

    <div class="app-body">
      <!-- Sidebar overlay for mobile -->
      <div id="sidebar-overlay" class="sidebar-overlay" hidden></div>

      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-section">
          <h2 class="sidebar-heading">History</h2>
          <button id="clear-history-btn" class="text-btn">Clear</button>
        </div>
        <ul id="history-list" class="history-list"></ul>
      </aside>

      <!-- Main content -->
      <main class="main-content">
        <!-- Input area (shown when no file is being viewed) -->
        <div id="input-area" class="input-area">
          <div id="drop-zone" class="drop-zone">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <p>Drop a <strong>.md</strong> file here</p>
            <span class="drop-zone-hint">or click to browse</span>
            <input type="file" id="file-input" accept=".md" hidden>
          </div>
          <div class="paste-section">
            <div class="divider"><span>or paste markdown</span></div>
            <textarea id="paste-input" placeholder="# Hello World&#10;&#10;Paste your markdown here..."></textarea>
            <button id="render-btn" class="primary-btn">Render</button>
          </div>
        </div>

        <!-- Rendered output -->
        <div id="viewer-area" class="viewer-area" hidden>
          <div class="viewer-toolbar">
            <button id="back-btn" class="text-btn">&larr; Back</button>
            <button id="delete-file-btn" class="text-btn danger">Delete</button>
          </div>
          <article id="rendered-output" class="markdown-body"></article>
        </div>
      </main>
    </div>
  </div>

  <!-- markdown-it + highlight.js from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
